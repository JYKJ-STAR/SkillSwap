{% extends "shared/base.html" %}
{% import "shared/macros.html" as macros %}

{% block title %}Events - SkillSwap{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/youth/events.css') }}">
{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Back Button -->
    <a href="{{ url_for('dashboard.dashboard') }}" class="back-button">
        ‚Üê Back
    </a>

    <!-- Events Page Layout -->
    <div class="events-page">
        <!-- Sidebar Filters -->
        <aside class="filters-sidebar">
            <h2 class="filters-title">Filters</h2>
            <p class="filters-subtitle">Earn more points as Mentors and Buddies</p>

            <!-- Category Filter -->
            <div class="filter-section">
                <h3 class="filter-section-title">Category</h3>
                <div class="category-filters">
                    <label class="checkbox-container">
                        <input type="checkbox" value="tech_digital" onchange="filterByCategory('tech_digital')">
                        <span class="checkmark"></span>
                        üñ•Ô∏è Tech & Digital
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" value="life_skills" onchange="filterByCategory('life_skills')">
                        <span class="checkmark"></span>
                        üç≥ Life Skills
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" value="health_wellness" onchange="filterByCategory('health_wellness')">
                        <span class="checkmark"></span>
                        üßò Health & Wellness
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" value="culture_creative" onchange="filterByCategory('culture_creative')">
                        <span class="checkmark"></span>
                        üé® Culture & Creative
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" value="social_games" onchange="filterByCategory('social_games')">
                        <span class="checkmark"></span>
                        üé≤ Social & Games
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" value="community_projects"
                            onchange="filterByCategory('community_projects')">
                        <span class="checkmark"></span>
                        üõ†Ô∏è Community Projects
                    </label>
                </div>
            </div>

            <!-- Location Filter -->
            <div class="filter-section">
                <h3 class="filter-section-title">Location</h3>
                <select class="location-dropdown" onchange="filterByLocation(this.value)">
                    <option value="all">All Locations</option>
                    <option value="ang mo kio">Ang Mo Kio</option>
                    <option value="bedok">Bedok</option>
                    <option value="bishan">Bishan</option>
                    <option value="jurong">Jurong</option>
                    <option value="punggol">Punggol</option>
                    <option value="tampines">Tampines</option>
                    <option value="toa payoh">Toa Payoh</option>
                    <option value="yishun">Yishun</option>
                </select>
            </div>

            <!-- Reset Button -->
            <button class="reset-filter-btn" onclick="resetFilters()">Reset Filter</button>
        </aside>

        <!-- Main Content -->
        <main class="events-content">
            <!-- Header -->
            <div class="content-header">
                <h1 class="page-title">Recommended Events for YOU</h1>
                <div class="header-actions">
                    <button class="language-selector">Choose Language &gt;</button>
                    <div class="search-container">
                        <input type="text" class="search-box" placeholder="Search" onkeyup="searchEvents(this.value)">
                    </div>
                </div>
            </div>

            <!-- Recommended Events for YOU Section -->
            <section class="events-section" data-section="recommended">
                <h2 class="section-title">Recommended Events for YOU</h2>
                <div class="events-row">
                    {% if recommended_events %}
                    {% for event in recommended_events %}
                    <div class="event-card-compact" data-category="{{ event.category }}"
                        data-location="{{ event.location|lower }}">
                        <span class="event-category-badge category-{{ event.category }}">{{ event.category_display
                            }}</span>
                        <h3 class="event-card-title">{{ event.title }}</h3>
                        <p class="event-card-description">{{ event.description[:80] }}...</p>
                        <div class="event-card-meta">
                            <div class="event-card-meta-item">
                                <span>{{ event.time }}</span>
                                <span>|</span>
                                <span>{{ event.location }}</span>
                            </div>
                        </div>
                        <span class="event-led-by">Led by: {{ event.led_by|capitalize }}</span>
                        <a href="#" class="event-card-btn">View Details</a>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="empty-state">
                        <p>No recommended events found. Check back soon!</p>
                    </div>
                    {% endif %}
                </div>
            </section>

            <!-- Recommended Events to Bond Section -->
            <section class="events-section" data-section="bond">
                <h2 class="section-title">ü§ù Recommended Events to Bond</h2>
                <div class="events-row">
                    {% if bond_events %}
                    {% for event in bond_events %}
                    <div class="event-card-compact" data-category="{{ event.category }}"
                        data-location="{{ event.location|lower }}">
                        <span class="event-category-badge category-{{ event.category }}">{{ event.category_display
                            }}</span>
                        <h3 class="event-card-title">{{ event.title }}</h3>
                        <p class="event-card-description">{{ event.description[:80] }}...</p>
                        <div class="event-card-meta">
                            <div class="event-card-meta-item">
                                <span>{{ event.time }}</span>
                                <span>|</span>
                                <span>{{ event.location }}</span>
                            </div>
                        </div>
                        <span class="event-led-by">Led by: {{ event.led_by|capitalize }}</span>
                        <a href="#" class="event-card-btn">View Details</a>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="empty-state">
                        <p>No bonding events scheduled. Check back soon!</p>
                    </div>
                    {% endif %}
                </div>
            </section>

            <!-- All Events by Category -->
            {% for category_key, category_name in category_display.items() %}
            {% if events_by_category.get(category_key) %}
            <section class="events-section category-section" data-section="{{ category_key }}">
                <h2 class="section-title">{{ category_name }}</h2>
                <div class="events-row">
                    {% for event in events_by_category[category_key][:5] %}
                    <div class="event-card-compact" data-category="{{ event.category }}"
                        data-location="{{ event.location|lower }}">
                        <span class="event-category-badge category-{{ event.category }}">{{ category_name }}</span>
                        <h3 class="event-card-title">{{ event.title }}</h3>
                        <p class="event-card-description">{{ event.description[:80] }}...</p>
                        <div class="event-card-meta">
                            <div class="event-card-meta-item">
                                <span>{{ event.time }}</span>
                                <span>|</span>
                                <span>{{ event.location }}</span>
                            </div>
                        </div>
                        <span class="event-led-by">Led by: {{ event.led_by|capitalize }}</span>
                        <a href="#" class="event-card-btn">View Details</a>
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
            {% endfor %}
        </main>
    </div>
</div>

<script src="{{ url_for('static', filename='js/youth_events.js') }}"></script>
{% endblock %}